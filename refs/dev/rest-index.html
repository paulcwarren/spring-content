<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Paul Warren, Peter Blum, Jeff Pak">
<title>Spring Content REST - Reference Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book">
<div id="header">
<h1>Spring Content REST - Reference Documentation</h1>
<div class="details">
<span id="author" class="author">Paul Warren, Peter Blum, Jeff Pak</span><br>
<span id="revnumber">version 3.0.12-SNAPSHOT,</span>
<span id="revdate">2024-07-10</span>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2008-2017 The original authors.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.
</td>
</tr>
</table>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#preface">Preface</a>
<ul class="sectlevel1">
<li><a href="#project">Project metadata</a></li>
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_getting_started">2. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_introduction_2">2.1. Introduction</a></li>
<li><a href="#_maven_central_coordinates">2.2. Maven Central Coordinates</a></li>
<li><a href="#_adding_spring_content_rest_to_a_spring_boot_project">2.3. Adding Spring Content REST to a Spring Boot project</a></li>
<li><a href="#_adding_spring_content_rest_to_a_gradle_project">2.4. Adding Spring Content REST to a Gradle Project</a></li>
<li><a href="#_adding_spring_content_rest_to_a_maven_project">2.5. Adding Spring Content REST to a Maven Project</a></li>
<li><a href="#_configuring_spring_content_rest">2.6. Configuring Spring Content REST</a></li>
</ul>
</li>
<li><a href="#_store_resources">3. Store Resources</a>
<ul class="sectlevel2">
<li><a href="#_fundamentals">3.1. Fundamentals</a>
<ul class="sectlevel3">
<li><a href="#_store_resources_2">3.1.1. Store Resources</a></li>
<li><a href="#_associativestorecontentstore_resources">3.1.2. AssociativeStore/ContentStore Resources</a></li>
<li><a href="#_multiple_content_properties">3.1.3. Multiple Content Properties</a></li>
<li><a href="#_nested_content_properties">3.1.4. Nested Content Properties</a></li>
<li><a href="#_nested_multiple_content_properties">3.1.5. Nested Multiple Content Properties</a></li>
<li><a href="#_search">3.1.6. Search</a></li>
<li><a href="#_default_status_codes">3.1.7. Default status codes</a></li>
<li><a href="#_resource_discoverability">3.1.8. Resource Discoverability</a></li>
</ul>
</li>
<li><a href="#_the_store_resource">3.2. The Store Resource</a>
<ul class="sectlevel3">
<li><a href="#_supported_http_methods">3.2.1. Supported HTTP Methods</a></li>
</ul>
</li>
<li><a href="#_the_entity_resource">3.3. The Entity Resource</a></li>
<li><a href="#_the_content_property_resource">3.4. The Content Property Resource</a>
<ul class="sectlevel3">
<li><a href="#_supported_http_methods_2">3.4.1. Supported HTTP Methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_repository_resources_spring_data_rest_extensions">4. Repository Resources (Spring Data REST Extensions)</a>
<ul class="sectlevel3">
<li><a href="#_entity_content">4.1. Entity &amp; Content</a></li>
<li><a href="#search">4.2. Search</a>
<ul class="sectlevel3">
<li><a href="#_the_searchcontent_resource">4.2.1. The SearchContent Resource</a></li>
</ul>
</li>
<li><a href="#_locking_and_versioning">4.3. Locking and Versioning</a>
<ul class="sectlevel3">
<li><a href="#_the_lock_resource">4.3.1. The Lock Resource</a></li>
<li><a href="#_the_version_resource">4.3.2. The Version Resource</a></li>
<li><a href="#_the_findallversionslatest_resource">4.3.3. The FindAllVersionsLatest Resource</a></li>
<li><a href="#_the_findallversions_resource">4.3.4. The FindAllVersions Resource</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_customizing_store_resources">5. Customizing Store Resources</a>
<ul class="sectlevel2">
<li><a href="#_configuring_cors">5.1. Configuring CORS</a>
<ul class="sectlevel3">
<li><a href="#_store_interface_cors_configuration">5.1.1. Store Interface CORS Configuration</a></li>
<li><a href="#_global_cors_configuration">5.1.2. Global CORS Configuration</a></li>
</ul>
</li>
<li><a href="#_changing_the_base_uri">5.2. Changing the Base URI</a></li>
<li><a href="#_cache_control">5.3. Cache Control</a></li>
<li><a href="#_store_links">5.4. Store Links</a>
<ul class="sectlevel3">
<li><a href="#_customizing_the_link_relation">5.4.1. Customizing the link relation</a></li>
<li><a href="#_customizing_the_link">5.4.2. Customizing the link</a></li>
</ul>
</li>
<li><a href="#_store_resolver">5.5. Store Resolver</a></li>
<li><a href="#_putpost_content_handling">5.6. Put/Post Content Handling</a></li>
<li><a href="#_content_disposition">5.7. Content Disposition</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<h1 id="preface" class="sect0">Preface</h1>
<div class="sect1">
<h2 id="project">Project metadata</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Version control - <a href="http://github.com/paulcwarren/spring-content/" class="bare">http://github.com/paulcwarren/spring-content/</a></p>
</li>
<li>
<p>Bugtracker - <a href="http://github.com/paulcwarren/spring-content/issues" class="bare">http://github.com/paulcwarren/spring-content/issues</a></p>
</li>
<li>
<p>Release repository - <a href="https://repo1.maven.org/maven2/" class="bare">https://repo1.maven.org/maven2/</a></p>
</li>
<li>
<p>Snapshots repository - <a href="https://oss.sonatype.org/content/repositories/snapshots" class="bare">https://oss.sonatype.org/content/repositories/snapshots</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>REST web services have become the number one means for application integration on the web. In its core, REST defines that a system consists of resources that clients interact with. These resources are often also implemented in a hypermedia driven way.  Spring MVC offers a solid foundation to build theses kinds of services.  But implementing even the simplest REST web services for a multi-domain object system can be quite tedious and result in a lot of boilerplate code.</p>
</div>
<div class="paragraph">
<p>Spring Content REST builds on top of Spring Content stores and automatically exports those as REST resources.  It leverages REST to expose end-points for each content resource and it also optionally integrates with Spring Data REST&#8217;s hypermedia API to allow clients to find content resources that have been associated with Spring Data entities.</p>
</div>
<div class="paragraph">
<p>Spring Content REST officially supports:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/paulcwarren/spring-content/spring-content-fs">Spring Content Filesystem</a></p>
</li>
<li>
<p><a href="https://github.com/paulcwarren/spring-content/spring-content-s3">Spring Content S3</a></p>
</li>
<li>
<p><a href="https://github.com/paulcwarren/spring-content/spring-content-mongo">Spring Content Mongo</a></p>
</li>
<li>
<p><a href="https://github.com/paulcwarren/spring-content/spring-content-jpa">Spring Content JPA</a></p>
</li>
<li>
<p><a href="https://github.com/paulcwarren/spring-content/spring-content-gcs">Spring Content GCS</a></p>
</li>
<li>
<p><a href="https://github.com/paulcwarren/spring-content/spring-content-azure-storage">Spring Content Azure Storage</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">2. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2">2.1. Introduction</h3>
<div class="paragraph">
<p>Spring Content REST is itself a Spring MVC application and is designed in such a way that it should integrate with your existing Spring MVC applications with very little effort.</p>
</div>
</div>
<div class="sect2">
<h3 id="_maven_central_coordinates">2.2. Maven Central Coordinates</h3>
<div class="paragraph">
<p>The maven coordinates for this Spring Content library are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.github.paulcwarren&lt;/groupId&gt;
    &lt;artifactId&gt;spring-content-rest&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As it is usual to use several Spring Content libraries together importing the bom is recommended:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.github.paulcwarren&lt;/groupId&gt;
    &lt;artifactId&gt;spring-content-bom&lt;/artifactId&gt;
    &lt;version&gt;${spring-content-version}&lt;/version&gt;
    &lt;type&gt;pom&lt;/type&gt;
    &lt;scope&gt;import&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_spring_content_rest_to_a_spring_boot_project">2.3. Adding Spring Content REST to a Spring Boot project</h3>
<div class="paragraph">
<p>The simplest way to get to started is if you are building a Spring Boot application. That’s because Spring Content REST has both a starter as well as auto-configuration.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Spring Boot configuration with Gradle</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">dependencies {
    ...
    compile("com.github.paulcwarren:spring-content-rest-boot-starter:${version}")
	...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. Spring Boot configuration with Maven</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> &lt;dependencies&gt;
	...
    &lt;dependency&gt;
      &lt;groupId&gt;com.github.paulcwarren&lt;/groupId&gt;
      &lt;artifactId&gt;spring-content-rest-boot-starter&lt;/artifactId&gt;
      &lt;version&gt;${version}&lt;/version&gt;
    &lt;/dependency&gt;
	...
  &lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When using Spring Boot, Spring Content REST gets configured automatically.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_spring_content_rest_to_a_gradle_project">2.4. Adding Spring Content REST to a Gradle Project</h3>
<div class="paragraph">
<p>To add Spring Content REST to a Gradle-based project, add the spring-content-rest artifact to your compile-time dependencies:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">dependencies {
    ...
    compile("com.github.paulcwarren:spring-content-rest:${version}")
	...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_spring_content_rest_to_a_maven_project">2.5. Adding Spring Content REST to a Maven Project</h3>
<div class="paragraph">
<p>To add Spring Content REST to a Maven-based project, add the spring-content-rest artifact to your compile-time dependencies:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> &lt;dependencies&gt;
	...
    &lt;dependency&gt;
      &lt;groupId&gt;com.github.paulcwarren&lt;/groupId&gt;
      &lt;artifactId&gt;spring-content-rest&lt;/artifactId&gt;
      &lt;version&gt;${version}&lt;/version&gt;
    &lt;/dependency&gt;
	...
  &lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_spring_content_rest">2.6. Configuring Spring Content REST</h3>
<div class="paragraph">
<p>To install Spring Content REST alongside your existing Spring MVC application, you need to include the appropriate MVC configuration.  Spring Content REST configuration is defined in two classes  called; <code>RestConfiguration</code> and <code>HypermediaConfiguration</code> and they can just be imported into your applications configuration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This step is unnecessary if you are using Spring Boot’s auto-configuration. Spring Boot will automatically enable Spring Content REST when you include <code>com.github.paulcwarren:spring-content-rest-boot-starter</code> and your app is flagged as a <code>@SpringBootApplication</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Make sure you also configure Spring Content stores for the store you wish to use.  For details on that, please consult the reference documentation for the corresponding Spring Content module.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_store_resources">3. Store Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fundamentals">3.1. Fundamentals</h3>
<div class="paragraph">
<p>The core functionality of Spring Content REST, enabled through <code>@Import(RestConfiguration.class)</code>, is to export resources
for Spring Content stores.  This is often closely related to Spring Data repositories.</p>
</div>
<div class="paragraph">
<p>The following describes typical store scenarios and how they are exported with Spring Content REST.</p>
</div>
<div class="sect3">
<h4 id="_store_resources_2">3.1.1. Store Resources</h4>
<div class="paragraph">
<p>Spring Content <code>Store</code> manages Spring Resources that, when exported using Spring Content REST, are accessible by REST
endpoint.</p>
</div>
<div class="paragraph">
<p>Consider the following Store interface:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  public interface DvdStore extends Store&lt;String&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this example, the Store&#8217;s Resources are exported to the URI <code>/dvds</code>.  The path is derived from the
uncapitalized, pluralized, simple class name of the interface.  When interacting with this endpoint any additional path
is deemed to be the Resource&#8217;s location and will be used to fetch the Resource using the Store&#8217;s <code>getResource</code> method.
For example, a GET request to <code>/dvds/comedy/monty_pythons_flying_circus.mp4</code> will fetch from the <code>DvdStore</code> (<code>/dvds</code>),
the Resource <code>/comedy/monty_pythons_flying_circus.mp4</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_associativestorecontentstore_resources">3.1.2. AssociativeStore/ContentStore Resources</h4>
<div class="paragraph">
<p><code>AssociativeStore</code> and <code>ContentStore</code> both manage and associate Spring Resources with Spring Data Entities.  When exported using Spring Content REST these can also be accessed via REST endpoints.</p>
</div>
<div class="paragraph">
<p>Assume the following <code>Entity</code> class, <code>Repository</code> and <code>Store</code> interfaces:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @Entity
  @Data
  public class Dvd {
  	@Id
  	private Long id;

    @ContentId
    private UUID contentId;

  	@ContentLength
  	private Long contentLength;

  	@MimeType
  	private String contentType;

    @OiginalFileName
    private String contentName;
  }

  public interface DvdRepository extends CrudRepository&lt;Dvd, Long&gt; {}

  public interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this example a single Spring Resource (the DVD&#8217;s video stream) is associated with a Dvd Entity by annotating additional
fields on the Entity using the <code>@ContentId</code>, <code>@ContentLength</code> and <code>@MimeType</code> annotations.</p>
</div>
<div class="paragraph">
<p>In this example Spring Data REST exports a collection  resource to <code>/dvds</code>.  The path is derived from the uncapitalized, pluralized, simple class name of the domain class.  Item resources are also exported to the URI <code>/dvds {id}</code>.  The HTTP methods used to request this endpoint map onto the methods of <code>CrudRepository</code>.</p>
</div>
<div class="paragraph">
<p>Similarly, Spring Content REST also exports any associated Spring Resources to the URI <code>/dvds/{id}/{contentPropertyPath}</code>.  In this case <code>/dvds/{id}/content</code> because the Spring Content metadata is correlated using the prefix <code>content</code>.</p>
</div>
<div class="paragraph">
<p>For an <code>AssociativeStore</code> the HTTP methods are mapped as follows:-
- GET &#8594; getResource &#8594; getInputStream
- POST/PUT &#8594; getResource &#8594; getOutputStream, associate
- DELETE &#8594; unassociate</p>
</div>
<div class="paragraph">
<p>For a <code>ContentStore</code> the HTTP methods are mapped as follows:-
- GET &#8594; getContent
- POST/PUT &#8594; setContent
- DELETE &#8594; unsetContent</p>
</div>
<div class="sect4">
<h5 id="_additional_annotations">Additional Annotations</h5>
<div class="paragraph">
<p>Spring Content REST adds two annotations to the core set of
annotations provided by Spring Content Commons for capturing,
on the entity, information that is available from the HTTP requests
made by clients.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@MimeType</code>; captures the <code>Content-Type</code> header of POST/PUT requests
and is re-used on subsequent GET request responses</p>
</li>
<li>
<p><code>@OriginalFileName</code>; captures the filename sent by POST/PUT requests,
if available, and is re-used to set the content dispostion attachment filename
on subsequent GET requests</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_multiple_content_properties">3.1.3. Multiple Content Properties</h4>
<div class="paragraph">
<p>By correlating (i.e. using a common prefix for) the field names of the Spring Content annotations it is possible to associate multiple Spring Resources with a single Entity:-</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Entity
@Data
public class Dvd {
	private @Id @GeneratedValue Long id;
	private String title;

	// Content property 'video' storing the DVD video content
	private @ContentId UUID videoId;
	private @ContentLength Long videoLen;
	private @MimeType String videoType;

	// Content property 'image' storing the Dvd's image
	private @ContentId UUID imageId;
	private @ContentLength Long imageLen;
	private @MimeType String imageType;

	...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Spring Content REST will export these two associated Spring Resources to the URI <code>/dvds/{id}/video</code> and <code>/dvds/{id}/image</code>.</p>
</div>
<div class="paragraph">
<p>These endpoints can be found in the similarly named link relations in the Entity&#8217;s
<code>application/hal+json</code> response:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> "_links" : {
    ...
    "image" : {
      "href" : "http://localhost:8080/dvds/1/image"
    },
    "video" : {
      "href" : "http://localhost:8080/dvds/1/video"
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nested_content_properties">3.1.4. Nested Content Properties</h4>
<div class="paragraph">
<p>With its <code>@Embeddable</code>/<code>@Embedded</code> annotations JPA along with some of the newer database technologies like Mongo it is possible to model Entities as complex objects.  It may be appropriate to associate Spring Resources as nested properties on these complex objects, as in the following example:-</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Entity
@Data
public class Book {
	private @Id @GeneratedValue Long id;
	private String title;

	private @ContentId UUID coverId;
	private @ContentLength Long coverLen;
	private @MimeType String coverType;

	private @Embedded Chapter chapterOne = new Chapter();
	private @Embedded Chapter chapterTwo = new Chapter();
	...
}

@Embeddable
@Data
public class Chapter {

	// Content property 'video' storing the DVD video content
	private @ContentId UUID contentId;
	private @ContentLength Long contentLen;
	private @MimeType String contentType;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Spring Content REST will export these associated Spring Resources under the URIs; <code>/books/{id}/cover</code>, <code>/books/{id}/chapterOne</code> and <code>/books/{id}/chapterTwo</code> and so on.</p>
</div>
<div class="paragraph">
<p>These endpoints can be found in the similarly named link relations in the Entity&#8217;s
<code>application/hal+json</code> response:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  "_links" : {
    ...
    "cover" : {
      "href" : "http://localhost:8080/dvds/1/cover"
    },
    "chapterTwo" : {
      "href" : "http://localhost:8080/dvds/1/chapterTwo"
    },
    "chapterOne" : {
      "href" : "http://localhost:8080/dvds/1/chapterOne"
    }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_nested_multiple_content_properties">3.1.5. Nested Multiple Content Properties</h4>
<div class="paragraph">
<p>Of course it is also possible to have multiple content properties on nested objects too, as in this example:-</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Entity
@Data
public class Book {
    private @Id @GeneratedValue Long id;
    private String title;

    private @ContentId UUID coverId;
    private @ContentLength Long coverLen;
    private @MimeType String coverType;

    private @Embedded Chapter chapterOne = new Chapter();
    private @Embedded Chapter chapterTwo = new Chapter();
    ...
}

@Embeddable
@Data
public class Chapter {

    // Content property 'video' storing the DVD video content
    private @ContentId UUID contentId;
    private @ContentLength Long contentLen;
    private @MimeType String contentType;

    private @ContentId UUID epigraphId;
    private @ContentLength Long epigraphLen;
    private @MimeType String epigraphType;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With nested multiple content properties Spring Content REST will export
 these associated Spring Resources under the URIs; <code>/books/{id}/cover</code>,
 <code>/books/{id}/chapterOne/content</code>, <code>/books/{id}/chapterOne/epigraph</code>,
 <code>/books/{id}/chapterTwo/content</code> and <code>/books/{id}/chapterTwo/epigraph</code>.</p>
</div>
<div class="paragraph">
<p>These endpoints can be found in the following link relations:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  "_links" : {
    ...
    "cover" : {
      "href" : "http://localhost:8080/dvds/1/cover"
    },
    "chapterOne/content" : {
      "href" : "http://localhost:8080/dvds/1/chapterOne/content"
    }
    "chapterOne/epigraph" : {
      "href" : "http://localhost:8080/dvds/1/chapterOne/epigraph"
    },
    "chapterTwo/content" : {
      "href" : "http://localhost:8080/dvds/1/chapterTwo/content"
    },
    "chapterTwo/epigraph" : {
      "href" : "http://localhost:8080/dvds/1/chapterTwo/epigraph"
    },</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_search">3.1.6. Search</h4>
<div class="paragraph">
<p>Exported content stores may be marked as <code>Searchable</code>.  Assuming the following content store interface:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  public interface DvdStore extends ContentStore&lt;Dvd, UUID&gt;, Searchable&lt;UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When the store is exported, Spring Content REST exposes a fulltext query resource for the <code>Searchable.search</code> methods.
These resources are exported to the URI <code>/dvds/searchContent</code>.  Method parameters can be supplied as query parameters:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  curl -H 'Accept: application/hal+json'  http://localhost:8080/searchContent?queryString=foo</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_default_status_codes">3.1.7. Default status codes</h4>
<div class="paragraph">
<p>For the content resources exposed, we use a set of default status codes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>200 OK - for plain GET requests and POST and PUT requests that overwrite existing content resources</p>
</li>
<li>
<p>201 Created - for POST and PUT requests that create new content resources</p>
</li>
<li>
<p>204 No Content - for DELETE requests</p>
</li>
<li>
<p>206 Partial Content - for range GET requests</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_resource_discoverability">3.1.8. Resource Discoverability</h4>
<div class="paragraph">
<p>A core principle of HATEOAS is that Resources should be discoverable through the publication of links that point to the
available resources.  There are a few competing de-facto standards specifying how to represent links in JSON.  By default,
Spring Data REST uses HAL to render responses.  HAL defines links to be contained in a property of the returned document.</p>
</div>
<div class="paragraph">
<p>Resource discovery starts at the top level of the application.  By issuing a request to the root URL under which the
Spring Data REST application is deployed, the client can extract a set of links from the returned JSON object that
represent the next level of resources that are available to the client.</p>
</div>
<div class="paragraph">
<p>When enabled through <code>@Import(HypermediaConfiguration.class)</code> Spring Content REST will inject Store, Entity and Property
Resources links for both into the HAL responses created by Spring Data REST.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_store_resource">3.2. The Store Resource</h3>
<div class="paragraph">
<p>Spring Content REST exports Store Resources to <code>/{store}/**</code>.  The resource path and linkrel can be customized using the
<code>@StoreRestResource</code> annotation on the Store interface.</p>
</div>
<div class="sect3">
<h4 id="_supported_http_methods">3.2.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>Store Resources support <code>GET</code>, <code>PUT</code>, <code>POST</code>, and <code>DELETE</code>.  All other HTTP methods will cause a <code>405 Method Not
Allowed</code>.</p>
</div>
<div class="sect4">
<h5 id="_get">GET</h5>
<div class="paragraph">
<p>Returns the Resource&#8217;s content</p>
</div>
<div class="sect5">
<h6 id="_supported_media_types">Supported media types</h6>
<div class="paragraph">
<p>All content types except <code>application/json</code></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_putpost">PUT/POST</h5>
<div class="paragraph">
<p>Sets the Resources&#8217;s content</p>
</div>
<div class="sect5">
<h6 id="_supported_media_types_2">Supported media types</h6>
<div class="paragraph">
<p>All content types except <code>application/json</code></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_delete">DELETE</h5>
<div class="paragraph">
<p>Removes the Resource&#8217;s content</p>
</div>
<div class="sect5">
<h6 id="_supported_media_types_3">Supported media types</h6>
<div class="paragraph">
<p>All content types except <code>application/json</code></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_entity_resource">3.3. The Entity Resource</h3>
<div class="paragraph">
<p>Requests to <code>Store Resource</code> exist (partially) in the same URL space as Spring Data&#8217;s Entity Resource.
When a single piece of content is associated with an entity then "shortcut" requests to <code>/{store}/{id}</code>
will return content (or 404 if no content is set) instead of the entity&#8217;s json.</p>
</div>
<div class="paragraph">
<p>This behavior can be customized by preventing the Store Resource from responding to shortcut requests
with certain media types using exclusions, or by completely disabling the Store Resource from responding
to all shortcut requests, forcing full qualified requests only.  Note, this is likely to become the default
in future versions of Spring Content REST.</p>
</div>
<div class="paragraph">
<p>With Spring Boot 1.2 and later, you can customize the exclusions or disable shortcut requests entirely by
setting either of the following properties in application.properties:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">spring.content.rest.shortcut-request-mappings.excludes=&lt;VERB&gt;=&lt;MEDIA_TYPE&gt;[[,&lt;MEDIA_TYPE&gt;]:&lt;VERB&gt;=&lt;MEDIA_TYPE&gt;[,&lt;MEDIA_TYPE&gt;]]

spring.content.rest.shortcut-request-mappings.disabled=true|false</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>VERB is <code>GET</code>, <code>PUT</code>, <code>POST</code> or <code>DELETE</code></p>
</li>
<li>
<p>MEDIA_TYPE is any valid media type including <code>*/*</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Or if you&#8217;re not using Spring Boot, you can customize as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
class CustomContentRestMvcConfiguration {

  @Bean
  public ContentRestConfigurer contentRestConfigurer() {

    return new ContentRestConfigurer() {

      @Override
      public void configure(RestConfiguration config) {
        config.shortcutExclusions().exclude("GET", "*/*");

        // or
        // config.setShortcutLinks(false)
      }
    };
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_content_property_resource">3.4. The Content Property Resource</h3>
<div class="paragraph">
<p>Spring Content REST exports Property Resources to <code>/{store}/{id}/{contentPropertyPath}</code>.
The resource path and link relation prefix can be customized using the <code>@StoreRestResource</code>
annotation on the Store interface.</p>
</div>
<div class="sect3">
<h4 id="_supported_http_methods_2">3.4.1. Supported HTTP Methods</h4>
<div class="paragraph">
<p>Property Resources support <code>GET</code>, <code>PUT</code>, <code>POST</code>, and <code>DELETE</code>.  All other HTTP methods will cause a <code>405 Method Not
Allowed</code>.</p>
</div>
<div class="sect4">
<h5 id="_get_2">GET</h5>
<div class="paragraph">
<p>Returns the Resource&#8217;s content</p>
</div>
<div class="sect5">
<h6 id="_supported_media_types_4">Supported media types</h6>
<div class="paragraph">
<p>All content types except <code>application/json</code></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_putpost_2">PUT/POST</h5>
<div class="paragraph">
<p>Sets the Resources&#8217;s content</p>
</div>
<div class="sect5">
<h6 id="_supported_media_types_5">Supported media types</h6>
<div class="paragraph">
<p>All content types except <code>application/json</code></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_delete_2">DELETE</h5>
<div class="paragraph">
<p>Removes the Resource&#8217;s content</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_repository_resources_spring_data_rest_extensions">4. Repository Resources (Spring Data REST Extensions)</h2>
<div class="sectionbody">
<div class="sect3">
<h4 id="_entity_content">4.1. Entity &amp; Content</h4>
<div class="sect4">
<h5 id="_the_collection_resource">The Collection Resource</h5>
<div class="paragraph">
<p>Spring Data REST exposes a collection resource named after the uncapitalized, pluralized version of the domain class the exported repository is handling.</p>
</div>
<div class="paragraph">
<p>Spring Content REST extends this collection resource with a handler that consumes <code>multipart/form-data</code>.  This handler allows the creation of an entity
and association of content in a single request.</p>
</div>
<div class="sect5">
<h6 id="_post">POST</h6>
<div class="paragraph">
<p>The POST method creates a new entity populating its properties from the form&#8217;s parameters and associates content from the form&#8217;s multipart files.</p>
</div>
<div class="paragraph">
<p>Form parameters may include relationships.</p>
</div>
<div class="paragraph">
<p>Multipart file names will be used to determine the content property to use in the set content operation.</p>
</div>
<div class="sect6">
<h7 id="_support_media_types">Support Media Types</h7>
<div class="paragraph">
<p>This POST method supports the <code>multipart/form-data</code> media type.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="search">4.2. Search</h3>
<div class="sect3">
<h4 id="_the_searchcontent_resource">4.2.1. The SearchContent Resource</h4>
<div class="paragraph">
<p>When a Store extending <code>Searchable</code> is exported, a <code>searchContent</code> endpoint will be
available at the <code>/{store}/searchContent</code> URI.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  curl -H 'Accept: application/hal+json'  http://localhost:8080/searchContent?queryString=foo</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_supported_http_methods_3">Supported HTTP Methods</h5>
<div class="paragraph">
<p>As the SearchContent resource is read-only it supports <code>GET</code> only.  All other HTTP methods will
cause a <code>405 Method Not Allowed</code>.</p>
</div>
<div class="sect5">
<h6 id="_supported_media_types_6">Supported media types</h6>
<div class="ulist">
<ul>
<li>
<p><code>application/hal+json</code></p>
</li>
<li>
<p><code>application/json</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_format_of_the_response_payload">Format of the response payload</h5>
<div class="paragraph">
<p>This resource can return entities, or a custom search result type, depending on how the Searchable interface is
specified and the type of Store it decorates.</p>
</div>
<div class="paragraph">
<p>When Searchable decorates an AssociativeStore this resource will lookup and return representations of the content&#8217;s
associated entities.  These lookups can be made more efficient by specifying a <code>@FulltextEntityLookupQuery</code> query
method.  This is a custom <code>findAll</code> method that accepts a single <code>Collection</code> parameter annotated with the name
<code>contentIds</code>, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    public interface MyRepository extends CrudRepository&lt;MyEntity, Long&gt; {

        @FulltextEntityLookupQuery
        List&lt;MyEntity&gt; findAllByContentIdIn(@Param("contentIds") List&lt;UUID&gt; contentIds);
    }

    public interface MyStore extends AssociativeStore&lt;MyEntity, UUID&gt;, Searchable&lt;UUID&gt; {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When Searchable is typed to your own search return type the resource will return a representation of this type instead.
See <code>Search Return Types</code> in the respective documentation for your chosen Spring Content fulltext module; solr or
elasticsearch, for more information on specifying a custom search return types.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_locking_and_versioning">4.3. Locking and Versioning</h3>
<div class="sect3">
<h4 id="_the_lock_resource">4.3.1. The Lock Resource</h4>
<div class="paragraph">
<p>When a repository extending <code>LockingAndVersioningRepository</code> is exported a lock endpoint
will be available at the <code>/{repository}/{id}/lock</code> URI.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  curl -X PUT http://localhost:8080/docs/1234/lock
  curl -X DELETE http://localhost:8080/docs/1234/lock</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_supported_http_methods_4">Supported HTTP Methods</h5>
<div class="paragraph">
<p>The Lock resource supports <code>PUT</code> and <code>DELETE</code>.  All other HTTP methods will cause a
<code>405 Method Not Allowed</code>.</p>
</div>
<div class="sect5">
<h6 id="_put">PUT</h6>
<div class="paragraph">
<p>Acquires a pessimistic lock on the resource.</p>
</div>
</div>
<div class="sect5">
<h6 id="_delete_3">DELETE</h6>
<div class="paragraph">
<p>If held, releases the pessimistic lock on the resource.</p>
</div>
<div class="sect6">
<h7 id="_supported_media_types_7">Supported media types</h7>
<div class="paragraph">
<p>Not applicable.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_version_resource">4.3.2. The Version Resource</h4>
<div class="paragraph">
<p>When a repository extending <code>LockingAndVersioningRepository</code> is exported a version
endpoint will be available at the <code>/{repository}/{id}/version</code> URI.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  curl -X PUT http://localhost:8080/docs/1234/version -d '{"number": "1.1", "label": "a minor change"}'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_supported_http_methods_5">Supported HTTP Methods</h5>
<div class="paragraph">
<p>The version resource supports <code>PUT</code>.  All other HTTP methods will cause a <code>405 Method
Not Allowed</code>.</p>
</div>
<div class="sect5">
<h6 id="_put_2">PUT</h6>
<div class="paragraph">
<p>Creates a new version of the entity.</p>
</div>
<div class="sect6">
<h7 id="_supported_media_types_8">Supported media types</h7>
<div class="paragraph">
<p>application/json</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_findallversionslatest_resource">4.3.3. The FindAllVersionsLatest Resource</h4>
<div class="paragraph">
<p>When a repository extending <code>LockingAndVersioningRepository</code> is exported a findAllVersionsLatest
endpoint will be available at the <code>/{repository}/findAllVersionsLatest</code> URI.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  curl -X GET http://localhost:8080/docs/findAllVersionsLatest</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_supported_http_methods_6">Supported HTTP Methods</h5>
<div class="paragraph">
<p>The version resource supports <code>GET</code>.  All other HTTP methods will cause a <code>405 Method
Not Allowed</code>.</p>
</div>
<div class="sect5">
<h6 id="_get_3">GET</h6>
<div class="paragraph">
<p>Returns the latest version of all entities.</p>
</div>
<div class="sect6">
<h7 id="_supported_media_types_9">Supported media types</h7>
<div class="paragraph">
<p>Not applicable.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_findallversions_resource">4.3.4. The FindAllVersions Resource</h4>
<div class="paragraph">
<p>When a repository extending <code>LockingAndVersioningRepository</code> is exported a findAllLatestVersions
endpoint will be available at the <code>/{repository}/{id}/findAllVersions</code> URI.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">  curl -X GET http://localhost:8080/docs/1234/findAllVersions</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_supported_http_methods_7">Supported HTTP Methods</h5>
<div class="paragraph">
<p>The version resource supports <code>GET</code>.  All other HTTP methods will cause a <code>405 Method
Not Allowed</code>.</p>
</div>
<div class="sect5">
<h6 id="_get_4">GET</h6>
<div class="paragraph">
<p>Returns all versions of the given entity.</p>
</div>
<div class="sect6">
<h7 id="_supported_media_types_10">Supported media types</h7>
<div class="paragraph">
<p>Not applicable.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customizing_store_resources">5. Customizing Store Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_configuring_cors">5.1. Configuring CORS</h3>
<div class="paragraph">
<p>For security reasons, browsers prohibit AJAX calls to resources residing outside the current origin.  When working with
client-side HTTP requests issued by a browser you may want to enable specific HTTP resources to be accessible.</p>
</div>
<div class="paragraph">
<p>Spring Data Content supports Cross-Origin Resource Sharing (CORS) through Spring’s CORS support.</p>
</div>
<div class="sect3">
<h4 id="_store_interface_cors_configuration">5.1.1. Store Interface CORS Configuration</h4>
<div class="paragraph">
<p>You can add a @CrossOrigin annotation to your store interfaces to enable CORS for the whole store.  By default
@CrossOrigin allows all origins and HTTP methods:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@CrossOrigin
interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the above example CORS support is enabled for the whole DvdStore.  @CrossOrigin also provides attributes to perform
more granular configuration.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@CrossOrigin(origins = "http://mydomain.com",
  methods = { RequestMethod.GET, RequestMethod.POST, RequestMethod.DELETE },
  maxAge = 3600)
interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This example enables CORS support for the whole DvdStore providing one origin, restricted to GET, POST and DELETE
methods with a max age of 3600 seconds.</p>
</div>
</div>
<div class="sect3">
<h4 id="_global_cors_configuration">5.1.2. Global CORS Configuration</h4>
<div class="paragraph">
<p>In addition to fine-grained, annotation-based configuration, you probably want to define some global CORS configuration
as well. This is similar to Spring Web MVC’S CORS configuration but can be declared within Spring Content REST and
combined with fine-grained @CrossOrigin configuration. By default, all origins and GET, HEAD, and POST methods are
allowed.</p>
</div>
<div class="paragraph">
<p>The following example sets up the same CORS configuration but as a global configuration:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
public class SpringContentRestCustomization {

	@Bean
	private ContentRestConfigurer contentRestConfigurer() {

		return new ContentRestConfigurer() {
			@Override
			public void configure(RestConfiguration config) {
				config.getCorsRegistry().addMapping("/dvds/**")
						.allowedMethods("GET", "POST", "DELETE")
						.allowedOrigins("http://mydomain.com")
						.maxAge(3600);
			}
		};
	}
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_changing_the_base_uri">5.2. Changing the Base URI</h3>
<div class="paragraph">
<p>By default, Spring Content REST serves up REST resources at the root URI, '/'.</p>
</div>
<div class="paragraph">
<p>With Spring Boot 1.2 and later versions, you can change the base URI by setting a single property in application.properties, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">spring.content.rest.baseUri=/api</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Or if you are not using Spring Boot, you can do the following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
class CustomContentRestMvcConfiguration {

  @Bean
  public ContentRestConfigurer contentRestConfigurer() {

    return new ContentRestConfigurer() {

      @Override
      public void configure(RestConfiguration config) {
        config.setBaseUri(URI.create("/contentApi"));
      }
    };
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cache_control">5.3. Cache Control</h3>
<div class="paragraph">
<p>By using cache control headers effectively, we can instruct the
browser to cache resources and avoid network hops. This decreases
latency, and also the load on our applications.</p>
</div>
<div class="paragraph">
<p>Spring Content REST allows us to control these headers by configuring
a set of cache control rules applied, in the order they are defined,
to all GET requests for content.</p>
</div>
<div class="paragraph">
<p>One, or more, rules can be configured as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Configuration
class CustomContentRestMvcConfiguration {

   @Bean
   public ContentRestConfigurer configurer() {

       return new ContentRestConfigurer() {
           @Override
           public void configure(RestConfiguration config) {
               config
                   .cacheControl()
                       .antMatcher("/testEntities/*", CacheControl.maxAge(Duration.ofSeconds(60)));
           }
       };
   }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_store_links">5.4. Store Links</h3>
<div class="paragraph">
<p>For each Spring Resource associated with an Entity, Spring Content REST will generate a fully-qualified link and inject it into the Entity&#8217;s
Spring Data REST HAL response.</p>
</div>
<div class="paragraph">
<p>Given the following domain model, Repository and Store:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @Entity
  public class Dvd {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ContentId
    private UUID videoId;

    @ContentLength
    private Long videoLength;

    @MimeType
    private String videoMimeType;

    // getters and setters
  }

  public interface DvdRepository extends CrudRepository&lt;Dvd, Long&gt; {}

  public interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Spring Content REST will inject the following link:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  "_links" : {
    "self" : {
      ...
    },
    "dvd" : {
      ...
    },
    "video" : {
      "href" : "http://localhost:8080/dvds/1/video"
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Where the linkrel is named after the content property and the link URI is the fully-qualified URI of that content property.</p>
</div>
<div class="sect3">
<h4 id="_customizing_the_link_relation">5.4.1. Customizing the link relation</h4>
<div class="paragraph">
<p>Sometimes it can be useful to configure the linkrel for a content property.  This is done by specifying the <code>linkRel</code> attribute on
the StoreRestResource, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @StoreRestResource(linkRel="custom-linkrel")
  public interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This will result in the following linkrel instead:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> "_links" : {
    "self" : {
      ...
    },
    "dvd" : {
      ...
    },
    "custom-linkrel/video" : {
      "href" : "http://localhost:8080/dvds/1/video"
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The linkrel can be further customized by specifying the <code>linkRel</code> attribute on
the <code>@RestResource</code> placed on any field contributing to the path up-to and including the
@ContentId field, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @Entity
  public class Dvd {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @RestResource(linkRel="movie")
    @ContentId
    private UUID videoId;

    @ContentLength
    private Long videoLength;

    @MimeType
    private String videoMimeType;

    // getters and setters
  }

  public interface DvdRepository extends CrudRepository&lt;Dvd, Long&gt; {}

  @StoreRestResource(linkRel="custom-linkrel")
  public interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Resulting in the following lnkrel:-</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> "_links" : {
    "self" : {
      ...
    },
    "dvd" : {
      ...
    },
    "custom-linkrel/movie" : {
      "href" : "http://localhost:8080/dvds/1/video"
    }
  }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_customizing_the_link">5.4.2. Customizing the link</h4>
<div class="paragraph">
<p>In addition, the link itself can also be customized by specifying the <code>path</code> attribute on
the <code>@RestResource</code> placed on any field contributing to the path up-to and including the
@ContentId field, as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  @Entity
  public class Dvd {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @RestResource(linkRel="movie", path="movie")
    @ContentId
    private UUID videoId;

    @ContentLength
    private Long videoLength;

    @MimeType
    private String videoMimeType;

    // getters and setters
  }

  public interface DvdRepository extends CrudRepository&lt;Dvd, Long&gt; {}

  @StoreRestResource(linkRel="custom-linkrel")
  public interface DvdStore extends ContentStore&lt;Dvd, UUID&gt; {}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Resulting in the following lnk:-</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> "_links" : {
    "self" : {
      ...
    },
    "dvd" : {
      ...
    },
    "custom-linkrel/movie" : {
      "href" : "http://localhost:8080/dvds/1/movie"
    }
  }</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_store_resolver">5.5. Store Resolver</h3>
<div class="paragraph">
<p>Every REST request must map to one store and one store only.  However, it is entirely possible to define an application
with multiple stores that make this impossible.</p>
</div>
<div class="paragraph">
<p>For these situations you need to provide a <code>StoreResolver</code> that, based on runtime context, can resolve these conflicts.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Configuring a StoreResolver</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface S3ExampleStore extends S3ContentStore&lt;Example, UUID&gt;{}
public interface FSExampleStore extends FilesystemContentStore&lt;Example, UUID&gt;{}     <b class="conum">(1)</b>

@Configuration
@EnableS3Stores
@EnableFilesystemStores
public static class ApplicationConfig {

    @Bean
    public ContentRestConfigurer contentRestConfigurer() {
        return new ContentRestConfigurer() {
            @Override
            public void configure(RestConfiguration config) {
                config.addStoreResolver("examples", new StoreResolver() {           <b class="conum">(2)</b>
                    @Override
                    public StoreInfo resolve(StoreInfo... stores) {
                        /* your resolver implementation */
                    }
                });
            }
        };
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Both stores are typed to the domain type <code>Example</code> and will therefore be exported to the URI <code>/examples</code></p>
</li>
<li>
<p>Store resolver resolves requests to <code>/examples/&#8230;&#8203;</code> to either S3ExamplesStore or FSExampleStore, depending
on request context.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_putpost_content_handling">5.6. Put/Post Content Handling</h3>
<div class="paragraph">
<p>A <code>ContentStore</code> provides two methods for setting content.  Spring Content REST prefers to use
<code>setContent(S entity, InputStream)</code> over <code>setContent(S entity, Resource)</code> so that content is streamed through
the application.  This is usually the best approach.</p>
</div>
<div class="paragraph">
<p>However, under some circumstances this can be inconvenient when event handlers and store customizations
must handle the content as it moves through the application.  This also becomes inefficient when the
content is large and the content needs to be processed several times.</p>
</div>
<div class="paragraph">
<p>For these situations, it is possible to configure Spring Content REST to call <code>setContent(S entity, Resource)</code> as
follows:</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Configuring PUT/POST Handling</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface ExampleStore extends ContentStore&lt;Example, UUID&gt;{}

@Configuration
public static class ApplicationConfig {

   @Bean
   public ContentRestConfigurer configurer() {
       return new ContentRestConfigurer() {
           @Override
           public void configure(RestConfiguration config) {
               config.forDomainType(Example.class).putAndPostPreferResource();
           }
       };
   }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
if preferred, it is also possible to configure your <code>ContentStore</code> to hide the <code>setContent(S entity, InputStream)</code>
method by annotating this method with the <code>RestResource(export=false)</code> annotation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When configured this way, Spring Content REST will create a file backed Resource allowing event handlers and store
customizations to use <code>File</code>, <code>RandomAccessFile</code> and <code>Channel</code> Java io/nio APIs to process the content stream.</p>
</div>
<div class="paragraph">
<p>If you would like to defer until runtime so that a decision can be based on the request, you can instead provide
a <code>Resource&lt;Method, HttpHeaders&gt;</code>, as follows:</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. Deferring PUT/POST Handling until runtime</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public interface ExampleStore extends ContentStore&lt;Example, UUID&gt;{}

@Configuration
public static class ApplicationConfig {

   @Bean
   public ContentRestConfigurer configurer() {
       return new ContentRestConfigurer() {
           @Override
           public void configure(RestConfiguration config) {

               config.forDomainType(TestEntity.class).setSetContentResolver(new Resolver&lt;Method, HttpHeaders&gt;(){

                @Override
                public boolean resolve(Method method, HttpHeaders context) {

                    return // your logic here
               }});
           }
       };
   }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_content_disposition">5.7. Content Disposition</h3>
<div class="paragraph">
<p>For easier management of the content in the backend storage <code>setContent</code> methods overwrite existing content and <code>unsetContent</code> methods delete it.  This is easy and typically a good starting point but some applications may want to preserve old content no longer referenced by the application.</p>
</div>
<div class="paragraph">
<p>Using the <code>spring.content.rest.set-content-disposition=CreateNew</code> and <code>spring.content.rest.unset-content-disposition=Keep</code> properties this behavior can be changed to preserve the old content.  Please note that as far as Spring Content is concerned this old content is then orphaned from the application and must be managed out-of-band.  This behavior change is application-wide.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.0.12-SNAPSHOT<br>
Last updated 2024-07-10 04:18:39 UTC
</div>
</div>
</body>
</html>